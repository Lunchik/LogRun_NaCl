#@file Makefile
#@author garipova.nailya@tgtoil.com
#@author Copyright(C) 2012 TGT Oil & Gas Services. All right reserved.

RUNNER=$(NACL_SDK_ROOT)/tools/sel_ldr_x86_64 -a -c -- $(NACL_SDK_ROOT)/toolchain/win_x86_glibc/x86_64-nacl/lib64/runnable-ld.so --library-path $(NACL_SDK_ROOT)/toolchain/win_x86_glibc/x86_64-nacl/lib64

CXX=$(NACL_SDK_ROOT)/toolchain/win_x86_glibc/x86_64-nacl/bin/g++ 

CXX_SYS_FLAGS=-pipe -pthread -O3
USR_BASE=$(NACL_SDK_ROOT)/toolchain/win_x86_glibc/x86_64-nacl/usr
CXXLIBS=$(USR_BASE)/lib
CXXINCLUDE=$(USR_BASE)/include

fact.nexe: fact.cc Makefile
	$(CXX) $(CXXFLAGS) $(CXX_SYS_FLAGS) -I$(CXXINCLUDE) -L$(CXXLIBS) $< -lboost_thread -lboost_system -o $@

%.nexe: %.cc Makefile
	$(CXX) $(CXXFLAGS) $(CXX_SYS_FLAGS) $< -o $@


### do 
### make CXXFLAGS="-static -Wl,-T,ldscripts/elf64_nacl.x.static" fact.nexe
### to build static version of the program 
### or  
### make fact.nexe
### to build dynamic one

### for dynamic version, an extended manifest should be supplied. see on the NaCl web site

